function _defineProperty(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function _objectSpread(o){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.forEach(function(t){_defineProperty(o,t,n[t])})}return o}function createHttpRequest(){return window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new window.XMLHttpRequest:void 0}function AliLogTracker(t,o,n){this.uri_="//"+o+"."+t+"/logstores/"+n+"/track?APIVersion=0.6.0",this.params_=[],this.httpRequest_=createHttpRequest()}function isObject(t){return"[object Object]"===Object.prototype.toString.call(t)}function isFunction(t){return"[object Function]"===Object.prototype.toString.call(t)}function getUri(t){return isFunction(t)?t():t}function generatePageUri(){var e=_objectSpread({},{origin:!0,pathname:!0,search:!1,hash:!0,hashQuery:!1},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),r=window.location,i="";return["origin","pathname","search","hash"].forEach(function(t,o){if(e[t]){var n="hash"===t?function(){var t=r.hash||"";if(!e.hashQuery){var o=t.indexOf("?");-1!==o&&(t=t.substring(0,o))}return t}():r[t];i+=n||""}}),i}var baseConfig={host:"cn-shenzhen.log.aliyuncs.com",project:"zzcnext",performanceLogstore:"monitor_front",errorLogstore:"monitor_front_error_log",events:["load","error"]},defaultConfig=_objectSpread({},baseConfig,{projectName:"",isDebug:!(AliLogTracker.prototype={push:function(t,o){t&&o&&(this.params_.push(t),this.params_.push(o))},logger:function(){for(var o=this.uri_,t=0;0<this.params_.length;)o+=t%2==0?"&"+encodeURIComponent(this.params_.shift()):"="+encodeURIComponent(this.params_.shift()),++t;try{this.httpRequest_.open("GET",o,!0),this.httpRequest_.send(null)}catch(t){window&&window.console&&"function"==typeof window.console.log&&(console.log("Failed to log to ali log service because of this exception:\n"+t),console.log("Failed log data:",o))}}}),autoCollectPerformance:!0,uri:null,beforeSend:function(t){return t}}),monitor={version:"1.1.3",config:_objectSpread({},defaultConfig),events:{},Logger:AliLogTracker,setConfig:function(t,o){if(isObject(t)){var n=t;for(var e in n)this.config[e]=n[e]}else this.config[t]=o;this.checkConfig()},checkConfig:function(){var t=this.config,o=t.isDebug,n=t.projectName;o&&console.log("不真实发送日志哦！，isDebug : ".concat(o)),n||console.log("请配置具体项目名 projectName")},reportData:function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.config,e=_objectSpread({},{href:document.location.href,ua:window.navigator.userAgent,projectName:n.projectName,uri:getUri(n.uri)||""},o);if(e=n.beforeSend(e),this.config.isDebug)console.log("logger发送数据："),console.log(e);else{for(var r in e)t.push(r,e[r]+"");t.logger()}},on:function(t,o){this.events[t]||(this.events[t]=[]),this.events[t].push(o)},off:function(t,o){var n=this.events[t],e=n.findIndex(function(t){return t===o});return!!n[e]&&!(n[e]=null)},emit:function(t){for(var o=arguments.length,n=new Array(1<o?o-1:0),e=1;e<o;e++)n[e-1]=arguments[e];var r=this.events[t];r&&r.forEach(function(t){"function"==typeof t&&t.apply(void 0,n)})},generatePageUri:generatePageUri};baseConfig.events.length&&baseConfig.events.forEach(function(o){window.addEventListener(o,function(t){monitor.emit(o,t)})});var config=monitor.config;function report(t){var o=new monitor.Logger("".concat(config.host),"".concat(config.project),"".concat(config.errorLogstore));monitor.reportData(o,t)}monitor.on("error",function(t){var o=t.error,n={level:"error",error:"js",msg:o?o.message:"",stack:o?o.stack:""};monitor.report(n)});var config$1=monitor.config;function isSupportTiming(){return window.performance&&window.performance.timing}function toInt(t){var o=parseInt(t);return isNaN(o)?0:t}function collect(){var t={};if(!isSupportTiming())return{};var o=performance.timing;return t.dnsLookUp=toInt(o.domainLookupEnd-o.domainLookupStart),t.tcpTime=toInt(o.connectEnd-o.connectStart),t.ttfb=toInt(o.responseStart-o.requestStart),t.firstPaintTime=toInt(o.domLoading-o.navigationStart),window.firstPaintEnd&&(t.firstPaintTimeBody=toInt(window.firstPaintEnd-o.navigationStart)),t.trans=toInt(o.responseEnd-o.responseStart),t.timeToInteract=toInt(o.domInteractive-o.navigationStart),t.domReady=toInt(o.domContentLoadedEventEnd-o.navigationStart),t.onLoad=toInt(o.loadEventStart-o.navigationStart),t}function report$1(t){var o=new monitor.Logger("".concat(config$1.host),"".concat(config$1.project),"".concat(config$1.performanceLogstore));monitor.reportData(o,t)}monitor.on("load",function(){config$1.autoCollectPerformance&&(isSupportTiming()&&report$1(collect()))});var performance$1={collect:collect,report:report$1};(window.monitor=monitor).report=report,monitor.performance=performance$1;
//# sourceMappingURL=monitor-1.1.3.js.map
